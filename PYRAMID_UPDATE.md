# 金字塔副本系統更新

## 新功能概述

### 🔺 金字塔副本系統
當玩家在沙漠探險中遇到金字塔事件時，現在會彈出選擇介面，讓玩家決定是否進入金字塔探險。

## 核心特性

### 1. 選擇機制
- 遇到金字塔時會暫停遊戲並顯示選擇面板
- 玩家可選擇「進入探險」或「離開」
- 選擇介面包含完整的副本資訊說明

### 2. 副本參數
- **探險步數**: 固定 8 步
- **敵人強度**: 
  - 血量 x2.0 倍
  - 攻擊力 x1.8 倍
  - 敵人名稱會標示「(金字塔)」
- **獎勵倍率**: 
  - 經驗值 x3 倍
  - 金幣 x3 倍
- **裝備掉落**: 保證掉落優良(rare)以上品質裝備

### 3. 副本機制
- 副本內有獨立的 8 步探險進度
- 副本內敵人遭遇率更高（75%戰鬥率）
- 完成 8 步後自動退出副本，回到正常地圖
- 副本內的步數不計入正常地圖進度
- 步數顯示會顯示 🔺 圖標表示在金字塔中

### 4. 事件分布（金字塔內）
- 普通怪物: 35%
- 精英怪物: 25%
- 小頭目: 15%
- 綠洲: 10%
- 無事件: 15%

## 技術實現

### 新增狀態變數
```javascript
this.inPyramid = false;           // 是否在金字塔副本中
this.pyramidSteps = 0;            // 金字塔探險步數
this.pyramidMaxSteps = 8;         // 金字塔最大步數
this.normalMapSteps = 0;          // 儲存進入金字塔前的步數
```

### 新增方法
- `pyramid()` - 觸發金字塔事件，顯示選擇介面
- `showPyramidChoice()` - 顯示選擇面板
- `enterPyramid()` - 進入金字塔副本
- `exitPyramid()` - 退出金字塔副本
- `choosePyramidEvent()` - 金字塔內的事件選擇邏輯

### 修改方法
- `moveStep()` - 支援金字塔副本的步數系統
- `battle()` - 支援金字塔敵人強度增強
- `applySlotResults()` - 支援金字塔獎勵倍率
- `updateStatus()` - 顯示金字塔副本狀態

## 遊戲平衡

金字塔副本是高風險高回報的挑戰：
- **風險**: 敵人實力顯著增強，需要更強的裝備和策略
- **回報**: 3倍經驗和金幣，保證優良裝備掉落
- **策略**: 適合在裝備齊全、狀態良好時挑戰

## UI/UX 改進
- 美觀的金色漸變選擇面板
- 清晰的副本特性說明
- 明確的視覺提示（🔺 圖標）
- 步數顯示會根據副本狀態自動切換

## 後續可能的擴展
- 添加更多副本類型（神殿、陵墓等）
- 副本難度等級系統
- 副本專屬 BOSS 戰
- 副本完成獎勵（成就系統）
- 副本入場條件（等級、裝備需求）
